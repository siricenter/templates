<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="sign-in-form">

<!-- CSS -->
    <style>
      :host{  
      }

      .sign {
        background: #c0c0c0;
        font-size: 18px;
        border: 0;
        width: 100px;
        height: 45px;
        color: var(--text-primary-color);
        text-shadow: var(--text-shadow);
        border: 0;
        border-bottom: 5px solid #959595;
        cursor: pointer;
      }

      .register {
        background: var(--button-color-primary);
        font-size: 18px;
        border: 0;
        width: 100px;
        height: 45px;
        color: var(--text-primary-color);
        text-shadow: var(--text-shadow);
        border: 0;
        border-bottom: 5px solid var(--button-color-secondary);
        cursor: pointer;
      }

      .sign:hover {
        animation: hover ease-in 0.1s;
        animation-fill-mode: forwards;
      } 
      .register:hover {
        animation: hover ease-in 0.1s;
        animation-fill-mode: forwards;
      } 
      @keyframes hover {
        from  {opacity: 1; }
        to    {opacity: 0.8; }
      }

      #login {
        z-index: 1;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        display: none;
        position: fixed;
        background: rgba(51, 51, 51, 0.6);
        overflow: auto
      }

      #register {
        z-index: 1;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        display: none;
        position: fixed;
        background: rgba(51, 51, 51, 0.6);
        overflow: auto
      }

      #close {
        position: absolute;
        right: -14px;
        top: -14px;
        cursor: pointer
      }

      #close:click {
        animation: fade-out 0.3s;
      }

      #popupContact {
        position: absolute;
        opacity: 1;
        left: 50%;
        top: 17%;
        margin-left: -202px;
        animation: fade-in 0.5s;
      }

      iron-icon{
        color:white;
      }

      #form_log, #form_reg {
        max-width: 300px;
        min-width: 250px;
        padding: 10px 50px;
        padding-bottom: 30px;
        border-radius: 0px;
        background-color: var(--primary-background-color);
      }

      #title {
        background-color: var(--default-tertiary-color);
        color: var(--text-primary-color);
        text-shadow: var(--text-shadow);
        padding: 20px 35px;
        margin: -10px -50px;
        text-align: center;
      }

      @keyframes fade-in {
        from  {opacity: 0; }
        to    {opacity: 1; }
      }

      @keyframes fade-out {
        from  {opacity: 1; }
        to    {opacity: 0; }
      }

      input {
        width: 82%;
        padding: 10px;
        margin-top: 30px;
        border: var(--drawer-border-color);
        padding-left: 40px;
        font-size: 16px;
      }

      .end{
        margin-bottom: 50px;
      }

      #submit {
        text-decoration: none;
        width: 100%;
        text-align: center;
        display: block;
        background-color: var(--button-color-primary);
        color: var(--text-primary-color);
        border: 0px;
        padding: 10px 0;
        font-size: 20px;
        cursor: pointer;
        border-radius: 0px;
        text-shadow: var(--text-shadow);
        border-bottom: 5px solid var(--button-color-secondary);
        cursor: pointer;
      }
      #submit:hover {
              animation: hover ease-in 0.1s;
              animation-fill-mode: forwards;
            } 
    </style>

<!-- HTML -->
  <template>
    <body id="body" style="overflow:hidden;">

<!-- LOGIN POTION STARTS HERE -->
      <div id="login">
        <!-- Popup Div Starts Here -->
        <div id="popupContact">
          <!-- Contact Us Form -->
          <form id="form_log" name="form">
            <iron-icon id="close" class="highlight-off" icon="highlight-off" onclick="div_hide()">></iron-icon>
            <h2 id="title" class="signin">{{header}}</h2>
            <!--Paper elements form here-->
            <!-- content placed here -->
            <!-- use javascript to loop through each item in the form and recieve the information. -->
            <!-- if statement could be used to flip between login and register forms -->
            <input id="email" name="email" placeholder="{{field1}}" class="signin" type="text">
            <input id="password" name="password" class="end" placeholder="{{field2}}" class="signin" type="password">
          
            <content select=".login"></content>

            <button id="submit">{{submitting}}</button>
            <p class="signin"><i>Don't have an account? <a href="javascript:switch_to_reg()">Register</a></i></p>
            <!-- Add Google, facebook, ect. later -->
          </form>
        </div>
      </div>
<!-- END LOGIN -->

<!-- REGISTER PORTION STARTS HERE -->
      <div id="register">
        <!-- Popup Div Starts Here -->
        <div id="popupContact">
          <!-- Contact Us Form -->
          <form id="form_reg" name="form">
            <iron-icon id="close" class="highlight-off" icon="highlight-off" onclick="div_hide_reg()">></iron-icon>
            <h2 id="title">Register</h2>
            <!--Paper elements form here-->
            <!-- content placed here -->
            <!-- use javascript to loop through each item in the form and recieve the information. -->
            <input id="username" name="username" placeholder="Username" type="text">
            <input id="email" name="email" placeholder="Email" type="text">
            <input id="password" name="password" placeholder="Password" type="password">
            <input id="confirm_password" name="confirm_password" class="end" placeholder="Confirm Password" type="password">

            <content select=".register"></content>

            <button id="submit">Register</button>
            <p><i>Already have an account? <a href="javascript:switch_to_login()">Sign in</a></i></p>
            <!-- Add Google, facebook, ect. later -->
          </form>
        </div>
<!-- END REGISTER -->

      </div>
      <!-- Display Popup Button -->
      <button id="popup" class="sign" onclick="div_show()">{{sign}}</button>
      <button id="popup" class="register" onclick="div_show_reg()">{{reg}}</button>

    </body>  
  </template>

<!-- JAVASCRIPT -->
  <script>
    (function() {
      Polymer({
        is: 'sign-in-form',

        properties: {
          sign: {
            type: String,
            value: 'Sign in',
            notify: true
          },
          reg: {
            type: String,
            value: 'Register',
            notify: true
          },
          header: {
            type: String,
            value: 'Sign in',
            notify: true
          },
          field1: {
            type: String,
            value: 'Email',
            notify: true
          },
          field2: {
            type: String,
            value: 'Password',
            notify: true
          },
          submitting: {
            type: String,
            value: 'Send',
            notify: true
          }
        }
      });
    })();

    //Functions To Display Popup
    var formId = 0;
    function div_show() {
      formId = 0;
      document.getElementById('login').style.display = "block";
      document.getElementById("email").focus();
    }
    function div_show_reg() {
      formId = 1;
      document.getElementById('register').style.display = "block";
      document.getElementById("username").focus();
    }

    //Functions to Hide Popup
    function div_hide(){
      document.getElementById('login').style.display = "none";
      find_elements();
    }
    function div_hide_reg(){
      document.getElementById('register').style.display = "none";
      find_elements();
    }
    
    //Functions to switch between popups
    function switch_to_login(){
      div_hide_reg();
      div_show();
    }
    function switch_to_reg(){
      div_hide();
      div_show_reg();
    }

    function find_elements() {
    

    if (formId === 0) {
      var form = {
        username: document.forms[formId][0].value,
        password: document.forms[formId][1].value
      }
    }
    else {
    var form = [];
    var length = document.forms[formId].length; 
     // for(var i = 0; i < length; i++) {

      for(var i = 0; i < length; i++) {
        if (document.forms[formId][i].id === 'submit') 
           break;
        if (i === 0) {
          form[i] = {
            name: document.forms[formId][i].name,
            value: document.forms[formId][i].value
          }
        }
        else {
          form.push({
            name: document.forms[formId][i].name,
            value: document.forms[formId][i].value
          });
        }
    }
    }
    var length = form.length; 
     // for(var i = 0; i < length; i++) {

      for(var i = 0; i < length; i++) {
      // window.alert(form);
      console.log(form[i].value);
    }
    }
  </script>

</dom-module>
